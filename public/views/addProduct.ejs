<%- include('.././partials/header'); %>

<div class="container">
  <h1 class="display-3 text-center">Add a new product</h1>
</div>
<br>
<div class="container">
    <form id="productAdd">
        <div class="input-group mb-3">
            <label class="input-group-text" for="name">Product Name :</label>
        <input required type="text" id="name" name="name">
        </div>
        
        <div class="input-group mb-3">
        <label class="input-group-text" for="quantity">Image Link : </label>
        <input required type="text" id="imageUrl" name="imageUrl">
        </div>
        

        <div class="input-group mb-3">
        <label class="input-group-text" for="imageUrl">Quantity : </label>
        <input required type="number" id="quantity" name="quantity">
        </div>
        
        <div class="input-group mb-3">
        <label  class="input-group-text" for="price">Price : </label>
        <input required  type="number" id="price" name="price">
        </div>
        <input type="submit" class="btn btn-primary"></input>
    </form>
</div>
<script>
document.querySelector("#productAdd").addEventListener("submit", (e) => {
  e.preventDefault();
  const name = document.getElementById("name").value;
  const photoUrl = document.getElementById("imageUrl").value;
  const quantity = document.getElementById("quantity").value;
  const price = document.getElementById("price").value;
  const result = {
    name,
    photoUrl,
    quantity,
    price
  };
  console.log(result);
  document.getElementById("name").value = '';
  document.getElementById("imageUrl").value = '';
  document.getElementById("quantity").value = '';
  document.getElementById("price").value = ''; 
  //    console.log(`${location.hostname}:${location.port}/create`);
  fetch(`http://${location.hostname}:${location.port}/product/create`, {
    method: "POST",
    body: JSON.stringify(result),
    headers: { "Content-type": "application/json; charset=UTF-8" },
  })
    .then((response) => response.json())
    .then((data) => console.log(data))
    .catch((err) => console.log(err));
});
</script>
<%- include('.././partials/footer'); %>
